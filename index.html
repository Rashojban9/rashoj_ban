<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rashoj Ban - Software Developer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(to right, #4F46E5, #8B5CF6);
        }
        .section-animated {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .section-visible {
            opacity: 1;
            transform: translateY(0);
        }
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #0d0d1a;
        }
        /* Custom scrollbar for a polished look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* Darker track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #6d28d9; /* Purple thumb */
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">
<!-- THREE.js Canvas Container for Background Particles -->
<!-- This is only rendered on desktop to save mobile performance -->
<canvas id="three-canvas"></canvas>

<!-- Header -->
<header class="w-full flex justify-center py-6 px-4 sticky top-0 z-10 bg-gray-900 bg-opacity-70 backdrop-blur-lg shadow-lg">
    <nav class="container flex justify-between items-center max-w-7xl">
        <a href="#" class="text-2xl font-bold text-white tracking-widest">
            <span class="text-gradient">Rashoj</span> Ban
        </a>

        <!-- Desktop Navigation Menu -->
        <ul class="hidden md:flex space-x-8 text-lg font-medium">
            <li><a href="#about" class="hover:text-purple-400 transition-colors">About</a></li>
            <li><a href="#skills" class="hover:text-purple-400 transition-colors">Skills</a></li>
            <li><a href="#projects" class="hover:text-purple-400 transition-colors">Projects</a></li>
            <li><a href="#blogs" class="hover:text-purple-400 transition-colors">Blogs</a></li>
            <li><a href="#contact" class="hover:text-purple-400 transition-colors">Contact</a></li>
        </ul>

        <!-- Mobile Hamburger Button -->
        <button id="mobile-menu-button" class="md:hidden text-gray-300 hover:text-purple-400 focus:outline-none focus:text-purple-400">
            <i class="fa-solid fa-bars text-2xl"></i>
        </button>
    </nav>
</header>

<!-- Mobile Menu (Hidden by default) -->
<div id="mobile-menu" class="hidden md:hidden fixed top-0 left-0 w-full h-full bg-gray-900 bg-opacity-95 backdrop-blur-md z-20 flex flex-col items-center justify-center space-y-8 text-2xl font-bold transition-transform transform -translate-y-full">
    <button id="close-mobile-menu" class="absolute top-6 right-6 text-gray-300 hover:text-purple-400 focus:outline-none focus:text-purple-400">
        <i class="fa-solid fa-xmark text-3xl"></i>
    </button>
    <a href="#about" class="text-white hover:text-purple-400 transition-colors" onclick="document.getElementById('mobile-menu').classList.add('hidden');">About</a>
    <a href="#skills" class="text-white hover:text-purple-400 transition-colors" onclick="document.getElementById('mobile-menu').classList.add('hidden');">Skills</a>
    <a href="#projects" class="text-white hover:text-purple-400 transition-colors" onclick="document.getElementById('mobile-menu').classList.add('hidden');">Projects</a>
    <a href="#blogs" class="text-white hover:text-purple-400 transition-colors" onclick="document.getElementById('mobile-menu').classList.add('hidden');">Blogs</a>
    <a href="#contact" class="text-white hover:text-purple-400 transition-colors" onclick="document.getElementById('mobile-menu').classList.add('hidden');">Contact</a>
</div>

<!-- Main Content Container -->
<div class="relative z-0">
    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center text-center p-8">
        <div class="container max-w-7xl">
            <h1 class="text-5xl md:text-7xl font-extrabold leading-tight tracking-tight">
                Hello, I'm <span class="text-gradient">Rashoj</span> Ban
            </h1>
            <p class="mt-4 text-xl md:text-2xl text-gray-400">
                A passionate software developer specializing in creating robust and scalable applications.
            </p>
            <div class="mt-8 flex justify-center space-x-6">
                <a href="#projects" class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-full shadow-lg transition-transform transform hover:scale-105">View My Work</a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20 px-8 bg-gray-800 bg-opacity-70 backdrop-blur-lg section-animated">
        <div class="container mx-auto max-w-7xl">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">About Me</h2>

            <div class="flex flex-col md:flex-row items-center space-y-8 md:space-y-0 md:space-x-12">
                <div class="md:w-1/3 flex justify-center">
                    <!-- The image tag now has an ID and a placeholder URL -->
                    <img id="profile-photo" src="https://placehold.co/256x256/1f2937/fff?text=Loading..." alt="Rashoj Ban" class="rounded-full shadow-xl w-48 h-48 md:w-64 md:h-64 object-cover border-4 border-purple-600">
                </div>
                <div class="md:w-2/3 text-lg text-gray-300 leading-relaxed text-center md:text-left">
                    <p class="mb-4">
                        I am a dedicated software developer with a strong foundation in Java and the Spring ecosystem. My expertise lies in building high-performance, scalable, and maintainable back-end services. I am passionate about clean code, good design, and solving complex problems with elegant solutions.
                    </p>
                    <p>
                        Beyond the back-end, I have experience with modern front-end technologies like HTML, CSS, and JavaScript to create seamless user experiences. I am always eager to learn new technologies and contribute to challenging projects that make a real impact.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="py-20 px-8 bg-gray-900 bg-opacity-70 backdrop-blur-lg section-animated">
        <div class="container mx-auto max-w-7xl">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">My Skills</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <!-- Skill Card -->
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-brands fa-java"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Java</h3>
                    <p class="text-gray-400 mt-2">Core Java, OOP</p>
                </div>
                <!-- Skill Card -->
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-solid fa-gear"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Spring Boot</h3>
                    <p class="text-gray-400 mt-2">Microservices, REST APIs</p>
                </div>
                <!-- Skill Card -->
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-solid fa-database"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Databases</h3>
                    <p class="text-gray-400 mt-2">SQL, NoSQL</p>
                </div>
                <!-- Skill Card -->
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-brands fa-github"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Version Control</h3>
                    <p class="text-gray-400 mt-2">Git, GitHub</p>
                </div>
                <!-- Add more skills as needed -->
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-brands fa-html5"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Frontend</h3>
                    <p class="text-gray-400 mt-2">HTML, CSS, JS</p>
                </div>
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-solid fa-server"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">AWS</h3>
                    <p class="text-gray-400 mt-2">EC2, S3, RDS</p>
                </div>
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-brands fa-docker"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">DevOps</h3>
                    <p class="text-gray-400 mt-2">Docker, CI/CD</p>
                </div>
                <div class="p-6 bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 text-center transform hover:-translate-y-2 transition-transform">
                    <div class="text-4xl text-purple-400 mb-4">
                        <i class="fa-solid fa-code-fork"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white">Algorithms</h3>
                    <p class="text-gray-400 mt-2">Data Structures</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Blogs Section (Dynamic Content) -->
    <section id="blogs" class="py-20 px-8 bg-gray-800 bg-opacity-70 backdrop-blur-lg section-animated">
        <div class="container mx-auto max-w-7xl">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">My Blogs</h2>
            <div id="blogs-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Blog posts will be injected here by JavaScript -->
                <div class="col-span-full text-center text-lg text-gray-400">Loading blog posts...</div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-20 px-8 bg-gray-900 bg-opacity-70 backdrop-blur-lg section-animated">
        <div class="container mx-auto max-w-7xl">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">My Projects</h2>
            <div id="projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Project cards will be injected here by JavaScript -->
                <div class="col-span-full text-center text-lg text-gray-400">Loading projects...</div>
            </div>
        </div>
    </section>

    <!-- Updated Contact Section -->
    <section id="contact" class="py-20 px-8 section-animated">
        <div class="container mx-auto max-w-7xl">
            <h2 class="text-4xl font-bold text-center mb-12 text-white">Get in Touch</h2>
            
            <div class="bg-gray-800 bg-opacity-70 backdrop-blur-lg rounded-3xl shadow-2xl p-8 md:p-16">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-20 items-center">
                    <!-- Social Links Column -->
                    <div class="text-center md:text-left">
                        <p class="text-lg text-gray-400 mb-6">
                            I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision. Feel free to connect with me on social media or send me a direct message.
                        </p>
                        <h3 class="text-2xl font-bold text-white mb-6">Connect with me</h3>
                        <div class="flex justify-center md:justify-start space-x-8">
                            <!-- GitHub Link -->
                            <a href="https://github.com/Rashojban9" target="_blank" class="text-purple-400 hover:text-purple-300 transition-colors transform hover:scale-110">
                                <i class="fa-brands fa-github text-5xl"></i>
                            </a>
                            <!-- LinkedIn Link -->
                            <a href="https://www.linkedin.com/in/rashojban" target="_blank" class="text-purple-400 hover:text-purple-300 transition-colors transform hover:scale-110">
                                <i class="fa-brands fa-linkedin text-5xl"></i>
                            </a>
                            <!-- Gmail Link -->
                            <a href="mailto:rashojban9@gmail.com" target="_blank" class="text-purple-400 hover:text-purple-300 transition-colors transform hover:scale-110">
                                <i class="fa-solid fa-envelope text-5xl"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Contact Form Column -->
                    <div>
                        <h3 class="text-2xl font-bold text-center md:text-left text-white mb-6">Send Me a Message</h3>
                        <form id="contact-form-element" action="https://formspree.io/f/xanbdekr" method="POST" class="space-y-6">
                            <!-- The action attribute needs to be replaced with your Formspree endpoint -->
                            
                            <div>
                                <label for="name" class="block text-lg font-medium text-gray-300 mb-2">Name</label>
                                <input type="text" id="name" name="name" required class="w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 text-white placeholder-gray-500 transition-colors">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-lg font-medium text-gray-300 mb-2">Email</label>
                                <input type="email" id="email" name="email" required class="w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 text-white placeholder-gray-500 transition-colors">
                            </div>
                            
                            <div>
                                <label for="message" class="block text-lg font-medium text-gray-300 mb-2">Message</label>
                                <textarea id="message" name="message" rows="6" required class="w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600 text-white placeholder-gray-500 transition-colors"></textarea>
                            </div>
                            
                            <div class="text-center md:text-left">
                                <button type="submit" id="submit-button" class="px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-full shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2 focus:ring-offset-gray-900">
                                    Send Message
                                </button>
                                <p id="form-status" class="mt-4 text-sm font-medium text-gray-400"></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-center py-6 px-4 border-t border-gray-700 bg-opacity-70 backdrop-blur-lg">
        <p class="text-gray-500">
            &copy; 2025 Rashoj Ban. All rights reserved.
        </p>
    </footer>
</div>

<!-- THREE.js Library loaded traditionally to ensure global scope -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>

<!-- Firebase SDK and custom scripts in a single module -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInWithCustomToken, onAuthStateChanged, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, onSnapshot, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // --- Firebase Setup ---
    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

    let db, auth, userId;

    const initFirebase = async () => {
        try {
            const app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);

            if (initialAuthToken) {
                await signInWithCustomToken(auth, initialAuthToken);
            } else {
                await signInAnonymously(auth);
            }

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("Authenticated with user ID:", userId);
                    listenForBlogs();
                    listenForProjects();
                } else {
                    console.log("User is signed out.");
                }
            });
        } catch (error) {
            console.error("Error during Firebase initialization or authentication:", error);
        }
    };

    // --- API and Data Fetching ---
    const fetchGitHubProfilePhoto = async () => {
        const githubUsername = 'Rashojban9';
        const imgElement = document.getElementById('profile-photo');
        if (!imgElement) return;

        try {
            const response = await fetch(`https://api.github.com/users/${githubUsername}`);
            if (!response.ok) {
                throw new Error(`GitHub API request failed with status: ${response.status}`);
            }
            const data = await response.json();
            if (data && data.avatar_url) {
                imgElement.src = data.avatar_url;
                imgElement.alt = `${githubUsername}'s GitHub profile photo`;
            } else {
                console.warn('Could not find avatar_url in GitHub API response.');
            }
        } catch (error) {
            console.error("Error fetching GitHub profile photo:", error);
            imgElement.src = 'https://placehold.co/256x256/ef4444/fff?text=Error';
            imgElement.alt = 'Profile photo failed to load';
        }
    };

    const listenForBlogs = () => {
        if (!userId || !db) return;
        const blogsCollection = collection(db, `artifacts/${appId}/users/${userId}/blogs`);
        onSnapshot(query(blogsCollection), (snapshot) => {
            const blogsContainer = document.getElementById('blogs-container');
            blogsContainer.innerHTML = '';
            if (snapshot.empty) {
                blogsContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">No blog posts to display yet.</p>';
                return;
            }
            snapshot.forEach(doc => {
                const post = doc.data();
                const videoHtml = post.videoLink ? `
                    <div class="relative pt-[56.25%] overflow-hidden rounded-xl">
                        <iframe
                            src="${post.videoLink.replace('watch?v=', 'embed/')}"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen
                            class="absolute top-0 left-0 w-full h-full"
                        ></iframe>
                    </div>
                ` : '';

                const imageHtml = post.imageUrl ? `<img src="${post.imageUrl}" alt="${post.title}" class="w-full h-48 object-cover">` : '';

                const postHtml = `
                    <div class="bg-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300">
                        ${videoHtml || imageHtml}
                        <div class="p-6">
                            <h3 class="text-2xl font-semibold text-white">${post.title}</h3>
                            <p class="mt-2 text-gray-400">${post.summary}</p>
                            <div class="mt-4 flex items-center justify-between text-gray-500 text-sm">
                                <span>${post.date}</span>
                                <a href="#" class="text-purple-400 hover:underline">Read more</a>
                            </div>
                        </div>
                    </div>
                `;
                blogsContainer.innerHTML += postHtml;
            });
        });
    };

    const listenForProjects = () => {
        if (!userId || !db) return;
        const projectsCollection = collection(db, `artifacts/${appId}/users/${userId}/projects`);
        onSnapshot(query(projectsCollection), (snapshot) => {
            const projectsContainer = document.getElementById('projects-container');
            projectsContainer.innerHTML = '';
            if (snapshot.empty) {
                projectsContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">No projects to display yet.</p>';
                return;
            }
            snapshot.forEach(doc => {
                const project = doc.data();
                const tagsHtml = (project.tags || []).map(tag => `<span class="px-3 py-1 text-xs font-semibold bg-purple-600 text-white rounded-full">${tag}</span>`).join('');

                const videoHtml = project.videoLink ? `
                    <div class="relative pt-[56.25%] overflow-hidden">
                        <iframe
                            src="${project.videoLink.replace('watch?v=', 'embed/')}"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen
                            class="absolute top-0 left-0 w-full h-full"
                        ></iframe>
                    </div>
                ` : '';

                const imageHtml = project.imageUrl ? `<img src="${project.imageUrl}" alt="${project.title}" class="w-full h-48 object-cover">` : '';

                const projectHtml = `
                    <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 transform hover:-translate-y-2 transition-transform">
                        ${videoHtml || imageHtml}
                        <div class="p-6">
                            <h3 class="text-2xl font-semibold text-white">${project.title}</h3>
                            <p class="mt-2 text-gray-400">${project.summary}</p>
                            <div class="mt-4 flex flex-wrap gap-2">
                                ${tagsHtml}
                            </div>
                            <div class="mt-6 flex space-x-4">
                                ${project.demoLink ? `<a href="${project.demoLink}" target="_blank" class="text-purple-400 hover:text-purple-300 transition-colors"><i class="fa-solid fa-link mr-2"></i>Live Demo</a>` : ''}
                                ${project.githubLink ? `<a href="${project.githubLink}" target="_blank" class="text-purple-400 hover:text-purple-300 transition-colors"><i class="fa-brands fa-github mr-2"></i>GitHub</a>` : ''}
                            </div>
                        </div>
                    </div>
                `;
                projectsContainer.innerHTML += projectHtml;
            });
        });
    };

    // --- UI/UX Enhancements & Form Submission ---
    document.addEventListener('DOMContentLoaded', () => {
        // Mobile menu toggle logic
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMobileMenuButton = document.getElementById('close-mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
            setTimeout(() => {
                mobileMenu.classList.remove('-translate-y-full');
            }, 10);
        });

        closeMobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.add('-translate-y-full');
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
            }, 500); // Wait for transition to finish
        });

        // Event listener for all anchor tags in the mobile menu to close it
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('-translate-y-full');
                setTimeout(() => {
                    mobileMenu.classList.add('hidden');
                }, 500); // Wait for transition to finish
            });
        });

        initFirebase();
        fetchGitHubProfilePhoto();

        // Scroll-based animations
        const sections = document.querySelectorAll('.section-animated');
        const observerOptions = {
            root: null,
            threshold: 0.2
        };
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('section-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        sections.forEach(section => {
            observer.observe(section);
        });

        // Form submission logic for the new contact form
        const contactForm = document.getElementById('contact-form-element');
        const submitButton = document.getElementById('submit-button');
        const formStatus = document.getElementById('form-status');

        if (contactForm) {
            contactForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                submitButton.disabled = true;
                submitButton.textContent = 'Sending...';
                formStatus.textContent = 'Submitting your message...';

                const formData = new FormData(contactForm);
                const object = Object.fromEntries(formData.entries());
                const json = JSON.stringify(object);

                try {
                    const response = await fetch(contactForm.action, {
                        method: contactForm.method,
                        body: json,
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        }
                    });

                    if (response.ok) {
                        formStatus.textContent = 'Thank you for your message! I will get back to you soon.';
                        formStatus.classList.remove('text-red-400');
                        formStatus.classList.add('text-green-400');
                        contactForm.reset();
                    } else {
                        const data = await response.json();
                        if (Object.hasOwn(data, 'errors')) {
                            formStatus.textContent = data.errors.map(error => error.message).join(', ');
                        } else {
                            formStatus.textContent = 'Oops! There was a problem submitting your form.';
                        }
                        formStatus.classList.remove('text-green-400');
                        formStatus.classList.add('text-red-400');
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    formStatus.textContent = 'An unexpected error occurred. Please try again later.';
                    formStatus.classList.remove('text-green-400');
                    formStatus.classList.add('text-red-400');
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Send Message';
                }
            });
        }
    });

    // --- THREE.js Background Setup ---
    // This is now wrapped in a a window.onload to ensure the canvas is ready
    // and has a check to disable it on small screens.
    window.onload = function () {
        if (window.innerWidth > 768) { // Only run THREE.js on devices wider than 768px
            try {
                // Scene setup
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas') });
                renderer.setSize(window.innerWidth, window.innerHeight);

                // Particles setup
                const geometry = new THREE.BufferGeometry();
                const vertices = [];
                const numParticles = 200;
                for (let i = 0; i < numParticles; i++) {
                    const x = THREE.MathUtils.randFloatSpread(400);
                    const y = THREE.MathUtils.randFloatSpread(400);
                    const z = THREE.MathUtils.randFloatSpread(400);
                    vertices.push(x, y, z);
                }
                geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

                // Particle material and object
                const particleMaterial = new THREE.PointsMaterial({
                    color: 0x9f7aea,
                    size: 2,
                    sizeAttenuation: true
                });
                const particles = new THREE.Points(geometry, particleMaterial);
                scene.add(particles);

                // --- START of completed code ---

                // Line geometry and material
                const lineMaterial = new THREE.LineBasicMaterial({
                    color: 0x4B5563,
                    transparent: true,
                    opacity: 0.2
                });

                // Lines group to hold all lines
                const lines = new THREE.Group();
                scene.add(lines);

                // Create lines between nearby particles
                const maxDistance = 50;
                for (let i = 0; i < numParticles; i++) {
                    for (let j = i + 1; j < numParticles; j++) {
                        const v1 = new THREE.Vector3(vertices[i * 3], vertices[i * 3 + 1], vertices[i * 3 + 2]);
                        const v2 = new THREE.Vector3(vertices[j * 3], vertices[j * 3 + 1], vertices[j * 3 + 2]);

                        if (v1.distanceTo(v2) < maxDistance) {
                            const lineGeometry = new THREE.BufferGeometry().setFromPoints([v1, v2]);
                            const line = new THREE.Line(lineGeometry, lineMaterial);
                            lines.add(line);
                        }
                    }
                }

                camera.position.z = 200;

                // Animation Loop
                const animate = () => {
                    requestAnimationFrame(animate);

                    // Rotate the particles and lines for a dynamic effect
                    particles.rotation.y += 0.0005;
                    lines.rotation.y += 0.0005;

                    renderer.render(scene, camera);
                };

                // Handle window resize
                window.addEventListener('resize', () => {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    renderer.setSize(width, height);
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                });

                // Start the animation loop
                animate();

                // --- END of completed code ---

            } catch (error) {
                console.error("Error setting up THREE.js:", error);
            }
        }
    };
</script>
</body>
</html>
